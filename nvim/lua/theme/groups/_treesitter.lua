local M = {}

---@param c util.theme.palette
---@return util.theme.hl
function M.get(c)
  local RED = ds.color.blend(ds.color.lighten(c.red2, 20), c.red1, 0.7)
  local ORANGE = ds.color.blend(ds.color.lighten(c.orange1, 15), c.yellow1, 0.3)
  local GREEN = ds.color.blend(ds.color.lighten(c.green3, 30), c.cyan1, 0.2)
  local BLUE = ds.color.blend(ds.color.lighten(c.blue1, 10), c.aqua1, 0.25)
  local INDIGO = ds.color.blend(ds.color.lighten(c.blue1, 10), c.purple1, 0.4)
  local VIOLET = ds.color.blend(ds.color.lighten(c.magenta2, 25), c.purple2, 0.3)

  -- stylua: ignore
  return {
    -- treesitter highlighting
    ["@annotation"]                   = { fg = c.yellow2 },
    ["@attribute"]                    = { fg = c.yellow2 },
    ["@boolean"]                      = { link = "Boolean" },
    ["@character"]                    = { link = "Character" },
    ["@character.special"]            = { link = "SpecialChar" },
    ["@class"]                        = { fg = c.cyan0, bold = true },
    ["@comment"]                      = { link = "Comment" },
    ["@comment.documentation"]        = { link = "SpecialComment" },
    ["@comment.error"]                = { link = "Error" },
    ["@comment.hint"]                 = { link = "DiagnosticHint" },
    ["@comment.info"]                 = { link = "DiagnosticInfo" },
    ["@comment.note"]                 = { link = "DiagnosticInfo" },
    ["@comment.todo"]                 = { link = "Todo" },
    ["@comment.warning"]              = { link = "WarningMsg" },
    ["@conceal"]                      = { link = "Conceal" },
    ["@constant"]                     = { link = "Constant" },
    ["@constant.builtin"]             = { bold = true },
    ["@constant.macro"]               = { fg = c.cyan0, italic = true },
    ["@constructor"]                  = { fg = c.aqua1 },
    ["@definition.enum"]              = { bold = true },
    ["@diff.delta"]                   = { link = "DiffChange" },
    ["@diff.minus"]                   = { link = "DiffDelete" },
    ["@diff.plus"]                    = { link = "DiffAdd" },
    ["@error"]                        = { fg = c.red1 },
    ["@function"]                     = { link = "Function" },
    ["@function.builtin"]             = { bold = true },
    ["@function.call"]                = { link = "Function" },
    ["@function.macro"]               = { fg = c.blue1 },
    ["@function.method"]              = { link = "Function" },
    ["@function.method.call"]         = { link = "Function" },
    ["@keyword"]                      = { link = "Keyword" },
    ["@keyword.coroutine"]            = { link = "@keyword" },
    ["@keyword.conditional"]          = { link = "Conditional" },
    ["@keyword.debug"]                = { link = "Debug" },
    ["@keyword.directive"]            = { link = "PreProc" },
    ["@keyword.directive.define"]     = { link = "Define" },
    ["@keyword.exception"]            = { link = "Exception" },
    ["@keyword.function"]             = { fg = c.magenta1 },
    ["@keyword.import"]               = { link = "Include" },
    ["@keyword.operator"]             = { fg = c.magenta1 },
    ["@keyword.repeat"]               = { link = "Repeat" },
    ["@keyword.return"]               = { fg = c.red2 },
    ["@keyword.storage"]              = { link = "StorageClass" },
    ["@label"]                        = { link = "Label" },
    ["@markup"]                       = {},
    ["@markup.danger"]                = { fg = c.bg2, bg = c.red1 },
    ["@markup.diff.add"]              = { link = "DiffAdd" },
    ["@markup.diff.delete"]           = { link = "DiffDelete" },
    ["@markup.emphasis"]              = { fg = c.yellow2, italic = true },
    ["@markup.environment"]           = { fg = c.blue4 },
    ["@markup.environment.name"]      = { fg = c.yellow2 },
    ["@markup.italic"]                = { italic = true },
    ["@markup.link"]                  = { fg = ds.color.lighten(c.overlay1, 30) },
    ["@markup.link.label"]            = { fg = c.purple1 },
    ["@markup.link.label.symbol"]     = { link = "Identifier" },
    ["@markup.link.url"]              = { underline = true },
    ["@markup.list"]                  = { fg = c.aqua0 },
    ["@markup.list.checked"]          = { fg = c.green2 },
    ["@markup.list.unchecked"]        = { fg = c.overlay1 },
    ["@markup.math"]                  = { fg = c.purple0 },
    ["@markup.note"]                  = { fg = c.bg2, bg = c.aqua0 },
    ["@markup.raw"]                   = { fg = ds.color.blend(c.rose0, c.bg2, 0.80) },
    ["@markup.raw.markdown_inline"]   = { bg = ds.color.blend(c.blue4, c.bg0, 0.08) },
    ["@markup.strikethrough"]         = { strikethrough = true },
    ["@markup.strong"]                = { bold = true },
    ["@markup.todo"]                  = { link = "Todo" },
    ["@markup.underline"]             = { link = "Underlined" },
    ["@markup.quote"]                 = { fg = c.overlay0 },
    ["@markup.warning"]               = { fg = c.bg2, bg = c.yellow2 },
    ["@module"]                       = { fg = c.blue1 },
    ["@module.builtin"]               = { fg = c.blue1, bold = true },
    ["@namespace.builtin"]            = { link = "@variable.builtin" },
    ["@none"]                         = {},
    ["@number"]                       = { link = "Number" },
    ["@number.float"]                 = { link = "Float" },
    ["@operator"]                     = { link = "Operator" },
    ["@property"]                     = { fg = c.fg1 },
    ["@punctuation.bracket"]          = { fg = c.aqua0 },
    ["@punctuation.delimiter"]        = { fg = c.aqua0 },
    ["@punctuation.special"]          = { fg = c.purple0 },
    ["@string"]                       = { link = "String" },
    ["@string.documentation"]         = { link = "SpecialComment" },
    ["@string.escape"]                = { fg = c.purple0 },
    ["@string.regexp"]                = { fg = c.rose1 },
    ["@string.special"]               = { link = "SpecialChar" },
    ["@string.special.symbol"]        = { fg = c.blue1 },
    ["@structure"]                    = { link = "Structure" },
    ["@tag"]                          = { link = "Tag" },
    ["@tag.attribute"]                = { fg = c.orange0 },
    ["@tag.delimiter"]                = { link = "Delimiter" },
    ["@type"]                         = { link = "Type" },
    ["@type.builtin"]                 = { bold = true },
    ["@type.definition"]              = { link = "TypeDef" },
    ["@type.qualifier"]               = { link = "Type" },
    ["@variable"]                     = { fg = c.fg1 },
    ["@variable.builtin"]             = { fg = c.fg2, bold = true },
    ["@variable.member"]              = { fg = c.fg1 },
    ["@variable.parameter"]           = { fg = c.rose1 },
    ["@variable.parameter.builtin"]   = { fg = c.rose1, bold = true },
    ["@variable.parameter.reference"] = { fg = c.rose1 },

    -- custom treesitter extended highlighting
    ["@markup.codeblock"]             = { link = "@markup.raw.markdown_inline"},
    ["@markup.dash"]                  = { fg = c.overlay0, bold = true },
    ["@markup.heading.1"]             = { fg = BLUE, bold = true },
    ["@markup.heading.2"]             = { fg = INDIGO, bold = true },
    ["@markup.heading.3"]             = { fg = VIOLET, bold = true },
    ["@markup.heading.4"]             = { fg = RED, bold = true },
    ["@markup.heading.5"]             = { fg = ORANGE, bold = true },
    ["@markup.heading.6"]             = { fg = GREEN, bold = true },
    ["@markup.table"]                 = { link = "@punctuation.special" },
    ["@variable.member.yaml"]         = { fg = c.aqua1 },

    -- nvim-treesitter-context
    TreesitterContext               = { link = "Normal" },
    TreesitterContextLineNumber     = { link = "LineNr" },
    TreesitterContextSeparator      = { link = "NonText" },
  }
end

return M
