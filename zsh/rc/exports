# define configuration path for bat
if hash bat 2>/dev/null; then
	export BAT_CONFIG_PATH="${CONFIG_HOME}/bat/bat.conf"
fi

# set the default editor
if hash nvim 2>/dev/null;then
	export EDITOR=nvim
else
	export EDITOR=vim
fi

if hash fzf 2>/dev/null; then
	# Use ? as the trigger sequence instead of the default **
	export FZF_COMPLETION_TRIGGER='?'

	# set fd as the default source for fzf
	export FZF_DEFAULT_COMMAND='fd -HI --hidden --follow --type file --color=always'
	export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"

	# define default options for fzf
	if hash bat 2>/dev/null; then
		__fzf_preview_opts="--ansi --preview-window 'right:60%' "
		export FZF_DEFAULT_OPTS=$__fzf_preview_opts
		unset __fzf_preview_opts
	fi

	export FZF_DEFAULT_OPTS=$FZF_DEFAULT_OPTS'
	 --color=dark
	 --color=fg:#bebebe,bg:-1,hl:#a3be8c
	 --color=fg+:#ebcb8b,bg+:-1,hl+:#a3be8c
	 --color=info:#4c566a,prompt:#81a1c1,pointer:#bf616a
	 --color=marker:#ebcb8b,spinner:#4c566a,header:#5f5f5f'
fi

# use standard ISO 8601 timestamp
export HISTTIMEFORMAT='%F %T '

# ignore commands that have no forensic value
export HISTIGNORE="&:[ ]*:exit:ls:bg:fg:history:clear"

# define history file location
export HISTFILE="${ZSH_CONFIG_HOME}/zsh_history"

# enable syntax highlighting for less
export LESS="-iFMRX"
export LESSCOLOR=always
export LESSCOLORIZER=/usr/bin/src-hilite-lesspipe.sh

# set location for less history file
export LESSHISTFILE="${CONFIG_HOME}/less/less_history"

# set location for vim runtime configuration
export MYVIMRC="${VIM_CONFIG_HOME}/vimrc"
__viminit=":set runtimepath+=${VIM_CONFIG_HOME},"
__viminit+="${VIM_CONFIG_HOME}/after"
__viminit+="|:source ${MYVIMRC}"
__viminit+="|:set runtimepath+=${VIM_CONFIG_HOME},"
__viminit+="${VIM_CONFIG_HOME}/after"
__viminit+="|call functions#neoviminit()"
export VIMINIT=$__viminit
unset __viminit

# define the default pager
export PAGER=$(which less)

# save the history
export SAVEHIST=$HISTSIZE

# ensure proper locale on macOS
if is_darwin; then
	export LC_CTYPE=en_US.UTF-8
	export LC_ALL=en_US.UTF-8
fi
